<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button style="color: #980000 !important;"></ion-back-button>
    </ion-buttons>
    <ion-title class="toolbartitle">Crear Anotación</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content>

  <div>

    <div class="form" [formGroup]="formNote">
      <div class="notedate">
        <ion-label class="date">{{ formatDate() }}</ion-label>
      </div>
      <ion-label>Anotación</ion-label>
      <ion-textarea autoGrow="true" class="textArea" formControlName="body"
      (click)="formNote.get('body').markAsTouched()" placeholder="Detalles de la anotación">
      </ion-textarea>
      <div class="error" *ngIf="formNote.get('body').hasError('required') && formNote.get('body').touched">
        Contenido de la anotación requerido.
      </div>

      <div class="row btn-img">
        <div class="col">
          <pro-button [text]="'Cargar Imágenes'" (click)="pickImages()"></pro-button>

          <div *ngIf="images.length > 0; else noImagesTemplate "></div>
            <ion-slides mode="ios" pager="ios" scrollbar="ios">
              <ion-slide *ngFor="let image of images">
                <ion-icon class="bin" slot="end" name="add"></ion-icon>
                <img [src]="image" alt="">
              </ion-slide>
            </ion-slides>
            <ng-template #noImagesTemplate>
              <div class="no-images" >
                No se han cargado imagenes.
              </div>
            </ng-template>
            
        </div>
      </div>


      <div class="row" *ngIf="users">
        <div class="col">
          <pro-select [title]="'Interventor Asignado'" (click)="formNote.get('user').markAsTouched()"
           [options]="mapUsers(users)" (outputValue)="setValue('user', $event)">
          </pro-select>
        </div>
        <div class="error" *ngIf="formNote.get('user').hasError('required') && formNote.get('user').touched">
          Interventor requerido.
        </div>
      </div>

     

      <div class="row">
        <div class="col btn">
          <pro-button [text]="'Crear'" [type]="'submit'" (click)="saveNote()"></pro-button>
        </div>
      </div>

    </div>

  </div>

</ion-content>
